diff --git a/node_modules/rollup/dist/native.js b/node_modules/rollup/dist/native.js
index c5a65c3..b17d328 100644
--- a/node_modules/rollup/dist/native.js
+++ b/node_modules/rollup/dist/native.js
@@ -89,9 +89,23 @@ const requireWithFriendlyError = id => {
 	}
 };
 
-const { parse, parseAsync, xxhashBase64Url, xxhashBase36, xxhashBase16 } = requireWithFriendlyError(
-	existsSync(path.join(__dirname, localName)) ? localName : `@rollup/rollup-${packageBase}`
-);
+const loadRollupBindings = () => {
+        const target = existsSync(path.join(__dirname, localName)) ? localName : `@rollup/rollup-${packageBase}`;
+        try {
+                return requireWithFriendlyError(target);
+        } catch (error) {
+                if (process?.env?.ROLLUP_PREFER_NATIVE === 'true') {
+                        throw error;
+                }
+                try {
+                        return require('@rollup/wasm-node');
+                } catch {
+                        throw error;
+                }
+        }
+};
+
+const { parse, parseAsync, xxhashBase64Url, xxhashBase36, xxhashBase16 } = loadRollupBindings();
 
 function getPackageBase() {
 	const imported = bindingsByPlatformAndArch[platform]?.[arch];
